drop database trab_bd;
create database trab_bd;

use trab_bd;

CREATE TABLE ORGAO_SUPERIOR (
	codigo varchar(255),
	nome varchar(255) not null,
	primary key (codigo)
	
);

CREATE TABLE ORGAO_SUBORDINADO(
	codigo varchar(255),
	nome varchar(255) not null,
	cod_superior varchar(255),
	CONSTRAINT fk_cod_superior FOREIGN KEY (cod_superior)
	REFERENCES ORGAO_SUPERIOR(codigo),
	PRIMARY KEY (codigo, cod_superior)

);

CREATE TABLE UNIDADE_GESTORA (
	codigo varchar(255),
	nome varchar(255) not null,
	cod_superior varchar(255),
	cod_subordinado varchar(255),
	CONSTRAINT fk_cod_superior_1 FOREIGN KEY (cod_superior)
	REFERENCES ORGAO_SUPERIOR(codigo),
	CONSTRAINT fk_cod_subordinado FOREIGN KEY (cod_subordinado)
	REFERENCES ORGAO_SUBORDINADO(codigo),
	PRIMARY KEY (codigo, cod_superior, cod_subordinado)
);

CREATE TABLE FUNCAO (
	codigo varchar(255),
	nome varchar(255) not null,
	cod_superior varchar(255),
	cod_subordinado varchar(255),
	cod_unidade_gestora varchar(255),
	CONSTRAINT fk_cod_superior2 FOREIGN KEY (cod_superior)
	REFERENCES ORGAO_SUPERIOR(codigo),
	CONSTRAINT fk_cod_subordinado2 FOREIGN KEY (cod_subordinado)
	REFERENCES ORGAO_SUBORDINADO(codigo),
	CONSTRAINT fk_cod_unidade_gestora FOREIGN KEY (cod_unidade_gestora)
	REFERENCES UNIDADE_GESTORA(codigo),
	PRIMARY KEY (codigo, cod_superior, cod_subordinado,cod_unidade_gestora)

);

CREATE TABLE SUB_FUNCAO (
	codigo varchar(255),
	nome varchar(255) not null,
	primary key (codigo)

);

CREATE TABLE PROGRAMA (
	codigo varchar(255),
	nome varchar(255) not null,
	primary key (codigo)

);

CREATE TABLE ACAO (
	codigo varchar(255),
	nome varchar(255) not null,
	linguagem_cidada varchar(255),
	primary key (codigo)

);

CREATE TABLE PESSOA (
	cpf int(20) unsigned,
	nome varchar(255) not null,	
	primary key (cpf)

);

CREATE TABLE PAGAMENTO (
	documento_pagamento int(255) unsigned,
	gestao_pagamento int(255) not null,	
	primary key (documento_pagamento)

);

CREATE TABLE PROG_ACAO (
	cod_prog varchar(255),
	cod_acao varchar(255),
	CONSTRAINT fk_cod_prog FOREIGN KEY (cod_prog)
	REFERENCES PROGRAMA(codigo),
	CONSTRAINT fk_cod_acao FOREIGN KEY (cod_acao)
	REFERENCES ACAO(codigo),
	PRIMARY KEY (cod_prog, cod_acao)
);


CREATE TABLE PROG_ORGAO (
	cod_prog varchar(255),
	cod_sub varchar(255),
	CONSTRAINT fk_cod_prog2 FOREIGN KEY (cod_prog)
	REFERENCES PROGRAMA(codigo),
	CONSTRAINT fk_cod_sub2 FOREIGN KEY (cod_sub)
	REFERENCES ORGAO_SUBORDINADO(codigo),
	PRIMARY KEY (cod_prog, cod_sub)

);


CREATE TABLE FUN_SUBFUN (
	cod_fun varchar(255),
	cod_sub_fun varchar(255),
	CONSTRAINT fk_cod_fun FOREIGN KEY (cod_fun)
	REFERENCES FUNCAO(codigo),
	CONSTRAINT fk_cod_sub_fun FOREIGN KEY (cod_sub_fun)
	REFERENCES SUB_FUNCAO(codigo),
	PRIMARY KEY (cod_fun, cod_sub_fun)

);

	
CREATE TABLE PESSOA_PAG (
	cpf_pessoa int(20) unsigned,
	doc_pag int(255) unsigned,
	data_pagamento date,
	valor int (255),
	CONSTRAINT fk_cpf_pessoa FOREIGN KEY (cpf_pessoa)
	REFERENCES PESSOA(cpf),
	CONSTRAINT fk_doc_pag FOREIGN KEY (doc_pag)
	REFERENCES PAGAMENTO(documento_pagamento),
	PRIMARY KEY (cpf_pessoa, doc_pag)


);


